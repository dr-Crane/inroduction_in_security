# Почему Signal просит пользователей установить PIN-код или “несколько мыслей о безопасном восстановлении данных”

## -Что такое Signal, и почему это важно? 

Signal-это приложение с открытым исходным кодом, разработанное Фондом Signal Technology Foundation.В сообществе довольно хорошо относятся к данному приложению в основном по двум причинам. 
Во-первых, приложение Signal послужило своего рода демонстрацией технологии для протокола [Signal](https://en.wikipedia.org/wiki/Signal_Protocol), который является фундаментальной базовой криптографией , которая питает популярные приложения, такие как Facebook Messenger и WhatsApp, и все их миллиарды пользователей.
Во-вторых, само приложение Signal популярно среди людей думающих о безопасности. Везде, где проблемы удобства использования вступали в конфликт с безопасностью, Signal исторически выбирал безопасный подход — по сравнению с более коммерческими альтернативами, такими как WhatsApp.
Зашифрованные мессенджеры такие как WhatsApp и Apple iMessage регулярно создают резервные копии содержимого текстовых сообщений и списков контактов на удаленных облачных серверах. Эти резервные копии облегчают хакерам и правительствам получение информации.

Signal решил этот вопрос более аккуратно.В июне этого года они добавили способ ручной передачи истории сообщений с одного iPhone на другой, и эта передача теперь включает сканирование QR-кодов. Для Android облачное резервное копирование возможно, если пользователи готовы записать тридцатизначный ключ шифрования.

В последнее время Signal решила увеличить пользовательскую базу. Разумеется люди, которые привыкли к более стандартным приложениям были недовольны. В итоге разработчики решили искать способ, с помощью которого они могли предоставлять те же услуги без вреда для безопасности. 

Как результат они разработали систему под названием [Secure Value Recovery](https://signal.org/blog/secure-value-recovery/).

## -Что такое "Secure Value Recovery"

Signal'S Secure Value Recovery (SVR)-это облачная система, которая позволяет пользователям хранить зашифрованные данные на серверах Signal — так, что даже сигнал не может получить к ним доступ — без проблем удобства использования, которые возникают из-за традиционного управления ключами шифрования. В настоящее время SVR используется для хранения списков контактов пользователей, а не содержимого сообщений, хотя в будущем эти данные могут быть включены в меню для резервного копирования.

Сложность хранения зашифрованных резервных копий данных заключается в том, что для надежного шифрования требуются надежные криптографические ключи и пароли. Поскольку многие выбирают простые пароли, то из-за этого возникают дополнительные сложности. Более того, эти ключи не могут просто храниться на вашем устройстве — поскольку весь смысл резервного копирования заключается в том, чтобы иметь дело с потерянными устройствами.

Цель SVR состоит в том, чтобы позволить пользователям защищать свои данные с помощью гораздо более простых паролей, которые люди действительно могут запомнить, таких как 4-значный PIN-код. В обычной ситуации подобный пароль был бы совершенно небезопасным (возможен перебор через атаку словарём). SVR решает эту проблему следующим образом: он вводит компьютер, который даже Signal не может взломать. Более конкретно, Signal использует новое расширение для процессоров Intel, называемое [Software Guard eXtensions](https://en.wikipedia.org/wiki/Software_Guard_Extensions) или SGX. SGX позволяет пользователям писать программы, называемые "анклавами", которые работают в специальном режиме виртуализированного процессора. В этом режиме анклавы невидимы и неприкасаемы для всех других программ на компьютере, включая операционную систему. Если требуется хранение, анклавы могут постоянно хранить данные, так что любая попытка вмешательства в программу сделает эти данные недоступными.

SVR развертывает такую анклавную программу на серверах Signal. Эта программа выполняет простую функцию: для каждого пользователя она генерирует и хранит случайное 256-битное криптографическое секретное "семя" вместе с хэшем PIN-кода пользователя. Когда пользователь связывается с сервером, он может представить хэш своего PIN-кода анклаву и запросить криптографическое семя. Если хэш совпадает с тем, что хранится в анклаве, сервер передает секретное семя клиенту, который может смешать его вместе с PIN-кодом. В результате получается криптографически надежный ключ шифрования, который можно использовать для шифрования или дешифрования резервных копий данных.

Чтобы предотвратить brute-force, анклав отслеживает количество неверных попыток ввода PIN-кода и разрешает только ограниченное число, прежде чем полностью заблокировать учетную запись этого пользователя.

Резюмируя SVR-приследует три цели:
1)Резервный ключ шифрования полностью или частично основан на пароле пользователя. Надежные пароли означают надежные ключи шифрования.
2)Даже при слабом пароле ключ шифрования все равно будет криптографически стойким. Это происходит от интеграции случайного семени, которое выбирается и хранится SGX.
3)Ни один злоумышленник не сможет пробиться через пространство паролей с помощью brute-force. Это обеспечивается SGX с помощью ограничений угадывания.
